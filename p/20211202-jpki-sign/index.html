<!doctype html><html lang=ja-jp>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="初めに 公的個人認証サービス(JPKI)は国および地方公共団体が共同で運営する地方公共団体情報システム"><title>日本国の公的個人認証サービスを利用したPDF署名とその受け入れ</title>
<link rel=canonical href=https://blog.mkarakiapps.com/p/20211202-jpki-sign/>
<link rel=stylesheet href=/scss/style.min.css><script type=text/javascript>(function(a,e,b,f,g,c,d){a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},c=e.createElement(f),c.async=1,c.src="https://www.clarity.ms/tag/"+g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d)})(window,document,"clarity","script","8ruafub4am")</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7860713879668057" crossorigin=anonymous></script>
<meta property="og:title" content="日本国の公的個人認証サービスを利用したPDF署名とその受け入れ">
<meta property="og:description" content="初めに 公的個人認証サービス(JPKI)は国および地方公共団体が共同で運営する地方公共団体情報システム">
<meta property="og:url" content="https://blog.mkarakiapps.com/p/20211202-jpki-sign/">
<meta property="og:site_name" content="mkarakiのブログ">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="JPKI"><meta property="article:tag" content="マイナンバー"><meta property="article:tag" content="PDF"><meta property="article:tag" content="署名"><meta property="article:published_time" content="2021-12-02T00:00:00+09:00"><meta property="article:modified_time" content="2021-12-03T01:18:59+09:00">
<meta name=twitter:site content="@arakimk">
<meta name=twitter:creator content="@arakimk"><meta name=twitter:title content="日本国の公的個人認証サービスを利用したPDF署名とその受け入れ">
<meta name=twitter:description content="初めに 公的個人認証サービス(JPKI)は国および地方公共団体が共同で運営する地方公共団体情報システム">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-145365019-1','auto'),ga('send','pageview'))</script>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>前のページ</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<h2 class=article-title>
<a href=/p/20211202-jpki-sign/>日本国の公的個人認証サービスを利用したPDF署名とその受け入れ</a>
</h2>
<h3 class=article-subtitle> 初めに 公的個人認証サービス(JPKI)は国および地方公共団体が共同で運営する地方公共団体情報システム… </h3s><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--published>Dec 02, 2021</time>
</footer></div>
</header>
<section class=article-content>
<h2 id=初めに>初めに</h2>
<p><a class=link href=https://www.jpki.go.jp target=_blank rel=noopener>公的個人認証サービス(JPKI)</a>は国および地方公共団体が共同で運営する<a class=link href=https://www.j-lis.go.jp/ target=_blank rel=noopener>地方公共団体情報システム機構</a>の提供するサービスである。</p>
<p>この記事では2021/12/02時点でのこのサービスとマイナンバーカードを利用したPDF署名とその受け入れについて記述するため、今後この記事の内容が利用できなくなる可能性も存在する。</p>
<p>マイナンバーに関する法律は多くあり、それらを遵守したうえで本ページを参考にしていただきたい。この記事が必ずにも現在の法律に<strong>適応しているわけではない</strong>ことを留意したうえで閲覧していただきたい。</p>
<h2 id=署名により記録される情報>署名により記録される情報</h2>
<p>署名をすることにより、下記の個人情報がPDFファイルに記載される。</p>
<ul>
<li>氏名</li>
<li>マイナンバー上に記述されている都道府県及び市町村</li>
</ul>
<p>上記情報を渡したくない相手に対しては署名したファイルを送信しないことを強く推奨する。</p>
<h2 id=サードパーティ製のソフトウェアを利用して署名する>サードパーティ製のソフトウェアを利用して署名する</h2>
<p>公式的に署名する方法は<a class=link href=https://www.touki-kyoutaku-online.moj.go.jp/cautions/security/pdf_sign_inst.html target=_blank rel=noopener>PDF署名プラグイン</a>を利用する方法が<a class=link href=https://www.moj.go.jp/ target=_blank rel=noopener>法務省</a>(<a class=link href=https://www.touki-kyoutaku-online.moj.go.jp/ target=_blank rel=noopener>登記ねっと 供託ねっと</a>)から提供されている。
しかし、この方法では<a class=link href=https://www.adobe.com/ target=_blank rel=noopener>Adobe Inc.</a>の<a class=link href=https://www.adobe.com/acrobat.html target=_blank rel=noopener>Adobe Acrobat</a>が必要であり、個人では敷居が高い。(無料版の<a class=link href=https://www.adobe.com/acrobat/pdf-reader.html target=_blank rel=noopener>Adobe Acrobat Reader</a>では署名の検証のみ可能)</p>
<p>今回は有志の方が開発した<a class=link href=https://jpki.osdn.jp/ target=_blank rel=noopener>JPKI PDF SIGNER</a>(無料)を利用する。</p>
<h3 id=事前準備>事前準備</h3>
<p>あらかじめカードリーダのドライバをインストールしておく必要がある。</p>
<h3 id=利用者クライアントソフトのインストール>利用者クライアントソフトのインストール</h3>
<p><a class=link href=https://www.jpki.go.jp target=_blank rel=noopener>JPKI</a>の提供する<a class=link href=https://www.jpki.go.jp/download/index.html target=_blank rel=noopener>利用者クライアントソフト</a>をダウンロードし、インストールする必要がある。</p>
<blockquote>
<p><strong>注意:</strong>
WindowsのロケールはJapaneseである必要性がある。この設定がされていない場合インストーラや本体ソフトウェアが動作しない。</p>
</blockquote>
<h3 id=jpki-pdf-signerのダウンロード>JPKI PDF SIGNERのダウンロード</h3>
<p>先に説明した通り、<a class=link href=https://jpki.osdn.jp/ target=_blank rel=noopener>JPKI PDF SIGNER</a>は有志の開発したマイナンバー用のPDF署名ソフトウェアである。</p>
<p>もし第三者の作成したソフトウェアに不信感を感じる場合、<a class=link href=https://ja.osdn.net/projects/jpki/ target=_blank rel=noopener>OSDNページ</a>からソースコードをダウンロードし、ユーザ側で検証とビルドを行うことを推奨する。</p>
<p>このアプリケーションにインストーラは存在しない。<a class=link href=https://jpki.osdn.jp/ target=_blank rel=noopener>公式ページ</a>からzipファイルをダウンロードし、各自で解凍して利用する。</p>
<h3 id=署名を行う>署名を行う</h3>
<p><a class=link href=https://jpki.osdn.jp/ target=_blank rel=noopener>公式サイト</a>に操作方法が記述されているので説明は不要であると思うが念のために記述する。</p>
<h4 id=印影を利用しない署名>印影を利用しない署名</h4>
<p>JPKI PDF SIGNERでPDFファイルを開き、右側メニューの<code>印影なしで電子署名する</code>をクリックする。
マイナンバーカードがコンピュータに認識されていれば<code>公的個人認証　署名用パスワード</code>の入力が求められる。</p>
<blockquote>
<p><strong>注意:</strong>
<a class=link href=https://www.jpki.go.jp target=_blank rel=noopener>JPKI</a>のサイトでは、「署名用電子証明書のパスワードを5回間違えるとロックされ、市区町村窓口でのロック解除が必要となる。」とアナウンスされている。</p>
<p>詳細は<a class=link href=https://www.jpki.go.jp/procedure/password.html target=_blank rel=noopener>パスワードの失念</a>を参照のこと。</p>
</blockquote>
<h2 id=署名された文章の受け入れ>署名された文章の受け入れ</h2>
<p>署名の検証には<a class=link href=https://www.adobe.com/ target=_blank rel=noopener>Adobe Inc.</a>の<a class=link href=https://www.adobe.com/acrobat/pdf-reader.html target=_blank rel=noopener>Adobe Acrobat Reader</a>(無料)を利用する。</p>
<h3 id=adobe-acrobat-readerのインストール>Adobe Acrobat Readerのインストール</h3>
<p><a class=link href=https://helpx.adobe.com/jp/acrobat/kb/cq101423182.html target=_blank rel=noopener>公式インストールマニュアル</a>を参考に<a class=link href=https://www.adobe.com/acrobat/pdf-reader.html target=_blank rel=noopener>Adobe Acrobat Reader</a>をインストールする。</p>
<h3 id=ルート証明書のダウンロード>ルート証明書のダウンロード</h3>
<p><a class=link href=https://www.jpki.go.jp target=_blank rel=noopener>JPKI</a>サイトからルート証明書をダウンロードする。</p>
<ol>
<li><a class=link href=https://www.jpki.go.jp/ca/index.html target=_blank rel=noopener>認証局の運営</a>ページにアクセスする。</li>
<li>画面左メニューから<a class=link href=https://www.jpki.go.jp/ca/ca_rules3.html target=_blank rel=noopener>署名用認証局の運営に関する情報</a>を開く</li>
<li><code>署名用認証局の自己署名証明書</code>を選択しダウンロードする。</li>
</ol>
<blockquote>
<p><strong>注意:</strong>
署名用認証局の自己署名証明書は存在するすべての証明書をダウンロードし追加すること。
これは、マイナンバー(証明書)発行時期により利用されているルート証明書が異なるためである。</p>
</blockquote>
<h3 id=ルート証明書の追加>ルート証明書の追加</h3>
<p>悲しいことにAdobe Acrobat ReaderにはJPKIで利用されている署名用認証局の自己署名証明書は信頼リストに追加されていない。
そのため、手動で信頼リストに追加する必要がある。</p>
<p>下記に手順を示す</p>
<ol>
<li>Acrobat Readerを開きウィンドウ上部のメニューバーから<code>編集</code>-><code>環境設定</code>と進む</li>
<li>設定画面左側のメニューから<code>署名</code>を選択</li>
<li><code>IDと信頼済み証明書</code>メニューを開く</li>
<li>ウィンドウ左メニューから<code>信頼済み証明書</code>を選択</li>
<li>画面上部の<a href=https://user-images.githubusercontent.com/26180919/144451492-feb927af-564f-4a08-a84c-84f49b491647.png>
<img src=https://user-images.githubusercontent.com/26180919/144451492-feb927af-564f-4a08-a84c-84f49b491647.png loading=lazy alt=取り込み>
</a>を選択</li>
<li>新規ウィンドウ上側リスト右の参照を選択</li>
<li>ダウンロードしたルート証明書を選択</li>
<li>複数のルート証明書をダウンロードした場合は手順<code>6.</code>から別の証明書を読み込む</li>
<li>ウィンドウ下の取り込みボタンを選択</li>
<li>Acrobat Readerを再起動する</li>
<li>再度手順<code>4.</code>まで進める</li>
<li><code>公的個人認証サービス署名用, 地方公共団体情報システム機構</code>から始まる証明書を1つずつ選択し、<a href=https://user-images.githubusercontent.com/26180919/144453978-7a28b974-b635-4af8-9c6d-ed52da298023.png>
<img src=https://user-images.githubusercontent.com/26180919/144453978-7a28b974-b635-4af8-9c6d-ed52da298023.png loading=lazy alt=信頼性を編集>
</a>ボタンを選択する</li>
<li><code>この証明書を信頼済みのルートとして使用</code>にチェックを入れ、画面下<code>OK</code>をクリックする</li>
<li>2つ以上追加した場合は手順<code>12.</code>に戻りすべての証明書に実施する</li>
<li>再度Acrobat Readerを再起動する</li>
</ol>
<p>以上でルート証明書が信頼リストに追加される。</p>
<h3 id=署名を検証する>署名を検証する</h3>
<p>Acrobat Readerで検証したいファイルを開く。</p>
<p><a href=https://user-images.githubusercontent.com/26180919/144454484-dcf3f6dc-fcef-4c5a-8265-ad1bb7e49c04.png>
<img src=https://user-images.githubusercontent.com/26180919/144454484-dcf3f6dc-fcef-4c5a-8265-ad1bb7e49c04.png loading=lazy alt=署名済みであり、すべての署名が有効です。>
</a><br>
の表示が出れば問題ない。</p>
<h4 id=署名者を確認する>署名者を確認する</h4>
<p><a class=link href=#%e7%bd%b2%e5%90%8d%e3%82%92%e6%a4%9c%e8%a8%bc%e3%81%99%e3%82%8b>署名を検証する</a>セクションで出たアラートにある<code>署名パネル</code>ボタンを選択する</p>
<ul>
<li>署名者を確認したい署名を開き、<code>署名の詳細</code>を開くと署名者の氏名が表示される。</li>
<li>上状態で<code>証明書の詳細…</code>をクリックすると証明書の情報を確認でき、ここで市町村のデータなどが閲覧できる。</li>
</ul>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/jpki/>JPKI</a>
<a href=/tags/%E3%83%9E%E3%82%A4%E3%83%8A%E3%83%B3%E3%83%90%E3%83%BC/>マイナンバー</a>
<a href=/tags/pdf/>PDF</a>
<a href=/tags/%E7%BD%B2%E5%90%8D/>署名</a>
</section>
<section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>
最終更新 Dec 03, 2021 01:18 AM JST
</span>
</section></footer>
</article>
<aside class=related-contents--wrapper>
</aside>
<script src=https://giscus.app/client.js data-repo=mkaraki/blog data-repo-id="MDEwOlJlcG9zaXRvcnkzNjk3MjYxODc=" data-category=Comment data-category-id=DIC_kwDOFgmS684CAHES data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-theme=light crossorigin=anonymous async></script>
<script>function setGiscusTheme(b){let a=document.querySelector('iframe.giscus-frame');a&&a.contentWindow.postMessage({giscus:{setConfig:{theme:b}}},"https://giscus.app")}(function(){addEventListener('message',b=>{if(event.origin!=='https://giscus.app')return;a()}),window.addEventListener('onColorSchemeChange',a);function a(){document.documentElement.dataset.scheme==="light"?setGiscusTheme('light'):setGiscusTheme('dark_dimmed')}})()</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2021 mkarakiのブログ
</section>
<section class=powerby>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.5.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">目次</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ul>
<li><a href=#初めに>初めに</a></li>
<li><a href=#署名により記録される情報>署名により記録される情報</a></li>
<li><a href=#サードパーティ製のソフトウェアを利用して署名する>サードパーティ製のソフトウェアを利用して署名する</a>
<ul>
<li><a href=#事前準備>事前準備</a></li>
<li><a href=#利用者クライアントソフトのインストール>利用者クライアントソフトのインストール</a></li>
<li><a href=#jpki-pdf-signerのダウンロード>JPKI PDF SIGNERのダウンロード</a></li>
<li><a href=#署名を行う>署名を行う</a></li>
</ul>
</li>
<li><a href=#署名された文章の受け入れ>署名された文章の受け入れ</a>
<ul>
<li><a href=#adobe-acrobat-readerのインストール>Adobe Acrobat Readerのインストール</a></li>
<li><a href=#ルート証明書のダウンロード>ルート証明書のダウンロード</a></li>
<li><a href=#ルート証明書の追加>ルート証明書の追加</a></li>
<li><a href=#署名を検証する>署名を検証する</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>